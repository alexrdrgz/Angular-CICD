version: 2.1
jobs:
  test:
    working_directory: ~/repo/
    docker:
      - image: cimg/node:16.10-browsers # the primary container, where your job's commands are run
        auth:
          username: mydockerhub-user
          password: $DOCKERHUB_PASSWORD  # context / project UI env-var reference
    steps:
      - checkout: # check out the code in the project directory
          path: ~/repo/
      # look for existing cache and restore if foun
      - run:
          name: Test Application
          command: |
            cd angular-app
            export CI=true
            npm install --also=dev
            npm install -g @angular/cli

workflows:
  version: 2
  build-and-test:
    jobs:
      - test